CREATE TABLE "tenants" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "resource_id" character varying NOT NULL, "current_state" character varying NULL, "desired_state" character varying NOT NULL, "watcher_osmanager" boolean NULL, "tenant_id" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, PRIMARY KEY ("id"));
CREATE UNIQUE INDEX "tenants_resource_id_key" ON "tenants" ("resource_id");
CREATE UNIQUE INDEX "tenants_tenant_id_key" ON "tenants" ("tenant_id");
CREATE INDEX "tenant_tenant_id" ON "tenants" ("tenant_id");
CREATE TABLE "region_resources" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "resource_id" character varying NOT NULL, "name" character varying NULL, "region_kind" character varying NULL, "metadata" character varying NULL, "tenant_id" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "region_resource_parent_region" bigint NULL, PRIMARY KEY ("id"), CONSTRAINT "region_resources_region_resources_parent_region" FOREIGN KEY ("region_resource_parent_region") REFERENCES "region_resources" ("id") ON DELETE SET NULL);
CREATE UNIQUE INDEX "region_resources_resource_id_key" ON "region_resources" ("resource_id");
CREATE INDEX "regionresource_tenant_id" ON "region_resources" ("tenant_id");
CREATE TABLE "ou_resources" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "resource_id" character varying NOT NULL, "name" character varying NULL, "ou_kind" character varying NULL, "metadata" character varying NULL, "tenant_id" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "ou_resource_parent_ou" bigint NULL, PRIMARY KEY ("id"), CONSTRAINT "ou_resources_ou_resources_parent_ou" FOREIGN KEY ("ou_resource_parent_ou") REFERENCES "ou_resources" ("id") ON DELETE SET NULL);
CREATE UNIQUE INDEX "ou_resources_resource_id_key" ON "ou_resources" ("resource_id");
CREATE INDEX "ouresource_tenant_id" ON "ou_resources" ("tenant_id");
CREATE TABLE "provider_resources" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "resource_id" character varying NOT NULL, "provider_kind" character varying NOT NULL, "provider_vendor" character varying NULL, "name" character varying NOT NULL, "api_endpoint" character varying NOT NULL, "api_credentials" character varying NULL, "config" character varying NULL, "tenant_id" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, PRIMARY KEY ("id"));
CREATE UNIQUE INDEX "provider_resources_resource_id_key" ON "provider_resources" ("resource_id");
CREATE UNIQUE INDEX "providerresource_name_tenant_id" ON "provider_resources" ("name", "tenant_id");
CREATE INDEX "providerresource_tenant_id" ON "provider_resources" ("tenant_id");
CREATE TABLE "site_resources" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "resource_id" character varying NOT NULL, "name" character varying NULL, "address" character varying NULL, "site_lat" integer NULL, "site_lng" integer NULL, "dns_servers" character varying NULL, "docker_registries" character varying NULL, "metrics_endpoint" character varying NULL, "http_proxy" character varying NULL, "https_proxy" character varying NULL, "ftp_proxy" character varying NULL, "no_proxy" character varying NULL, "metadata" character varying NULL, "tenant_id" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "site_resource_region" bigint NULL, "site_resource_ou" bigint NULL, "site_resource_provider" bigint NULL, PRIMARY KEY ("id"), CONSTRAINT "site_resources_region_resources_region" FOREIGN KEY ("site_resource_region") REFERENCES "region_resources" ("id") ON DELETE SET NULL, CONSTRAINT "site_resources_ou_resources_ou" FOREIGN KEY ("site_resource_ou") REFERENCES "ou_resources" ("id") ON DELETE SET NULL, CONSTRAINT "site_resources_provider_resources_provider" FOREIGN KEY ("site_resource_provider") REFERENCES "provider_resources" ("id") ON DELETE SET NULL);
CREATE UNIQUE INDEX "site_resources_resource_id_key" ON "site_resources" ("resource_id");
CREATE INDEX "siteresource_tenant_id" ON "site_resources" ("tenant_id");
CREATE TABLE "operating_system_resources" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "resource_id" character varying NOT NULL, "name" character varying NULL, "architecture" character varying NULL, "kernel_command" character varying NULL, "update_sources" character varying NULL, "image_url" character varying NULL, "image_id" character varying NULL, "sha256" character varying NULL, "profile_name" character varying NULL, "profile_version" character varying NULL, "installed_packages" character varying NULL, "security_feature" character varying NULL, "os_type" character varying NULL, "os_provider" character varying NOT NULL, "platform_bundle" character varying NULL, "tenant_id" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, PRIMARY KEY ("id"));
CREATE UNIQUE INDEX "operating_system_resources_resource_id_key" ON "operating_system_resources" ("resource_id");
CREATE INDEX "operatingsystemresource_tenant_id" ON "operating_system_resources" ("tenant_id");
CREATE TABLE "local_account_resources" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "resource_id" character varying NOT NULL, "username" character varying NOT NULL, "ssh_key" character varying NOT NULL, "tenant_id" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, PRIMARY KEY ("id"));
CREATE UNIQUE INDEX "local_account_resources_resource_id_key" ON "local_account_resources" ("resource_id");
CREATE UNIQUE INDEX "localaccountresource_username_tenant_id" ON "local_account_resources" ("username", "tenant_id");
CREATE INDEX "localaccountresource_tenant_id" ON "local_account_resources" ("tenant_id");
CREATE TABLE "instance_resources" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "resource_id" character varying NOT NULL, "kind" character varying NULL, "name" character varying NULL, "desired_state" character varying NULL, "current_state" character varying NULL, "vm_memory_bytes" bigint NULL, "vm_cpu_cores" bigint NULL, "vm_storage_bytes" bigint NULL, "security_feature" character varying NULL, "instance_status" character varying NULL, "instance_status_indicator" character varying NULL, "instance_status_timestamp" bigint NULL, "provisioning_status" character varying NULL, "provisioning_status_indicator" character varying NULL, "provisioning_status_timestamp" bigint NULL, "update_status" character varying NULL, "update_status_indicator" character varying NULL, "update_status_timestamp" bigint NULL, "update_status_detail" character varying NULL, "trusted_attestation_status" character varying NULL, "trusted_attestation_status_indicator" character varying NULL, "trusted_attestation_status_timestamp" bigint NULL, "tenant_id" character varying NOT NULL, "instance_status_detail" character varying NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "instance_resource_desired_os" bigint NOT NULL, "instance_resource_current_os" bigint NULL, "instance_resource_provider" bigint NULL, "instance_resource_localaccount" bigint NULL, PRIMARY KEY ("id"), CONSTRAINT "instance_resources_operating_system_resources_desired_os" FOREIGN KEY ("instance_resource_desired_os") REFERENCES "operating_system_resources" ("id") ON DELETE NO ACTION, CONSTRAINT "instance_resources_operating_system_resources_current_os" FOREIGN KEY ("instance_resource_current_os") REFERENCES "operating_system_resources" ("id") ON DELETE SET NULL, CONSTRAINT "instance_resources_provider_resources_provider" FOREIGN KEY ("instance_resource_provider") REFERENCES "provider_resources" ("id") ON DELETE SET NULL, CONSTRAINT "instance_resources_local_account_resources_localaccount" FOREIGN KEY ("instance_resource_localaccount") REFERENCES "local_account_resources" ("id") ON DELETE SET NULL);
CREATE UNIQUE INDEX "instance_resources_resource_id_key" ON "instance_resources" ("resource_id");
CREATE INDEX "instanceresource_tenant_id" ON "instance_resources" ("tenant_id");
CREATE TABLE "host_resources" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "resource_id" character varying NOT NULL, "kind" character varying NULL, "name" character varying NULL, "desired_state" character varying NULL, "current_state" character varying NULL, "note" character varying NULL, "hardware_kind" character varying NULL, "serial_number" character varying NULL, "uuid" character varying NULL, "memory_bytes" bigint NULL, "cpu_model" character varying NULL, "cpu_sockets" bigint NULL, "cpu_cores" bigint NULL, "cpu_capabilities" character varying NULL, "cpu_architecture" character varying NULL, "cpu_threads" bigint NULL, "cpu_topology" character varying NULL, "mgmt_ip" character varying NULL, "bmc_kind" character varying NULL, "bmc_ip" character varying NULL, "bmc_username" character varying NULL, "bmc_password" character varying NULL, "pxe_mac" character varying NULL, "hostname" character varying NULL, "product_name" character varying NULL, "bios_version" character varying NULL, "bios_release_date" character varying NULL, "bios_vendor" character varying NULL, "metadata" character varying NULL, "current_power_state" character varying NULL, "desired_power_state" character varying NULL, "host_status" character varying NULL, "host_status_indicator" character varying NULL, "host_status_timestamp" bigint NULL, "onboarding_status" character varying NULL, "onboarding_status_indicator" character varying NULL, "onboarding_status_timestamp" bigint NULL, "registration_status" character varying NULL, "registration_status_indicator" character varying NULL, "registration_status_timestamp" bigint NULL, "tenant_id" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "host_resource_site" bigint NULL, "host_resource_provider" bigint NULL, "instance_resource_host" bigint NULL, PRIMARY KEY ("id"), CONSTRAINT "host_resources_site_resources_site" FOREIGN KEY ("host_resource_site") REFERENCES "site_resources" ("id") ON DELETE SET NULL, CONSTRAINT "host_resources_provider_resources_provider" FOREIGN KEY ("host_resource_provider") REFERENCES "provider_resources" ("id") ON DELETE SET NULL, CONSTRAINT "host_resources_instance_resources_host" FOREIGN KEY ("instance_resource_host") REFERENCES "instance_resources" ("id") ON DELETE SET NULL);
CREATE UNIQUE INDEX "host_resources_resource_id_key" ON "host_resources" ("resource_id");
CREATE UNIQUE INDEX "host_resources_uuid_key" ON "host_resources" ("uuid");
CREATE UNIQUE INDEX "host_resources_instance_resource_host_key" ON "host_resources" ("instance_resource_host");
CREATE UNIQUE INDEX "hostresource_uuid" ON "host_resources" ("uuid") WHERE uuid IS NOT NULL;
CREATE UNIQUE INDEX "hostresource_serial_number" ON "host_resources" ("serial_number") WHERE uuid IS NULL;
CREATE INDEX "hostresource_tenant_id" ON "host_resources" ("tenant_id");
CREATE TABLE "endpoint_resources" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "resource_id" character varying NOT NULL, "kind" character varying NULL, "name" character varying NULL, "tenant_id" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "endpoint_resource_host" bigint NULL, PRIMARY KEY ("id"), CONSTRAINT "endpoint_resources_host_resources_host" FOREIGN KEY ("endpoint_resource_host") REFERENCES "host_resources" ("id") ON DELETE SET NULL);
CREATE UNIQUE INDEX "endpoint_resources_resource_id_key" ON "endpoint_resources" ("resource_id");
CREATE INDEX "endpointresource_tenant_id" ON "endpoint_resources" ("tenant_id");
CREATE TABLE "hostgpu_resources" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "resource_id" character varying NOT NULL, "pci_id" character varying NULL, "product" character varying NULL, "vendor" character varying NULL, "description" character varying NULL, "device_name" character varying NULL, "features" character varying NULL, "tenant_id" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "hostgpu_resource_host" bigint NOT NULL, PRIMARY KEY ("id"), CONSTRAINT "hostgpu_resources_host_resources_host" FOREIGN KEY ("hostgpu_resource_host") REFERENCES "host_resources" ("id") ON DELETE NO ACTION);
CREATE UNIQUE INDEX "hostgpu_resources_resource_id_key" ON "hostgpu_resources" ("resource_id");
CREATE INDEX "hostgpuresource_tenant_id" ON "hostgpu_resources" ("tenant_id");
CREATE TABLE "hostnic_resources" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "resource_id" character varying NOT NULL, "kind" character varying NULL, "provider_status" character varying NULL, "device_name" character varying NULL, "pci_identifier" character varying NULL, "mac_addr" character varying NULL, "sriov_enabled" boolean NULL, "sriov_vfs_num" bigint NULL, "sriov_vfs_total" bigint NULL, "peer_name" character varying NULL, "peer_description" character varying NULL, "peer_mac" character varying NULL, "peer_mgmt_ip" character varying NULL, "peer_port" character varying NULL, "supported_link_mode" character varying NULL, "advertising_link_mode" character varying NULL, "current_speed_bps" bigint NULL, "current_duplex" character varying NULL, "features" character varying NULL, "mtu" bigint NULL, "link_state" character varying NULL, "bmc_interface" boolean NULL, "tenant_id" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "hostnic_resource_host" bigint NOT NULL, PRIMARY KEY ("id"), CONSTRAINT "hostnic_resources_host_resources_host" FOREIGN KEY ("hostnic_resource_host") REFERENCES "host_resources" ("id") ON DELETE NO ACTION);
CREATE UNIQUE INDEX "hostnic_resources_resource_id_key" ON "hostnic_resources" ("resource_id");
CREATE INDEX "hostnicresource_tenant_id" ON "hostnic_resources" ("tenant_id");
CREATE TABLE "hoststorage_resources" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "resource_id" character varying NOT NULL, "kind" character varying NULL, "provider_status" character varying NULL, "wwid" character varying NULL, "serial" character varying NULL, "vendor" character varying NULL, "model" character varying NULL, "capacity_bytes" bigint NULL, "device_name" character varying NULL, "tenant_id" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "hoststorage_resource_host" bigint NOT NULL, PRIMARY KEY ("id"), CONSTRAINT "hoststorage_resources_host_resources_host" FOREIGN KEY ("hoststorage_resource_host") REFERENCES "host_resources" ("id") ON DELETE NO ACTION);
CREATE UNIQUE INDEX "hoststorage_resources_resource_id_key" ON "hoststorage_resources" ("resource_id");
CREATE INDEX "hoststorageresource_tenant_id" ON "hoststorage_resources" ("tenant_id");
CREATE TABLE "hostusb_resources" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "resource_id" character varying NOT NULL, "kind" character varying NULL, "owner_id" character varying NULL, "idvendor" character varying NULL, "idproduct" character varying NULL, "bus" bigint NULL, "addr" bigint NULL, "class" character varying NULL, "serial" character varying NULL, "device_name" character varying NULL, "tenant_id" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "hostusb_resource_host" bigint NOT NULL, PRIMARY KEY ("id"), CONSTRAINT "hostusb_resources_host_resources_host" FOREIGN KEY ("hostusb_resource_host") REFERENCES "host_resources" ("id") ON DELETE NO ACTION);
CREATE UNIQUE INDEX "hostusb_resources_resource_id_key" ON "hostusb_resources" ("resource_id");
CREATE INDEX "hostusbresource_tenant_id" ON "hostusb_resources" ("tenant_id");
CREATE TABLE "ip_address_resources" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "resource_id" character varying NOT NULL, "address" character varying NULL, "desired_state" character varying NULL, "current_state" character varying NULL, "status" character varying NULL, "status_detail" character varying NULL, "config_method" character varying NULL, "tenant_id" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "ip_address_resource_nic" bigint NOT NULL, PRIMARY KEY ("id"), CONSTRAINT "ip_address_resources_hostnic_resources_nic" FOREIGN KEY ("ip_address_resource_nic") REFERENCES "hostnic_resources" ("id") ON DELETE NO ACTION);
CREATE UNIQUE INDEX "ip_address_resources_resource_id_key" ON "ip_address_resources" ("resource_id");
CREATE INDEX "ipaddressresource_tenant_id" ON "ip_address_resources" ("tenant_id");
CREATE TABLE "netlink_resources" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "resource_id" character varying NOT NULL, "kind" character varying NULL, "name" character varying NULL, "desired_state" character varying NOT NULL, "current_state" character varying NULL, "provider_status" character varying NULL, "tenant_id" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "netlink_resource_src" bigint NULL, "netlink_resource_dst" bigint NULL, PRIMARY KEY ("id"), CONSTRAINT "netlink_resources_endpoint_resources_src" FOREIGN KEY ("netlink_resource_src") REFERENCES "endpoint_resources" ("id") ON DELETE SET NULL, CONSTRAINT "netlink_resources_endpoint_resources_dst" FOREIGN KEY ("netlink_resource_dst") REFERENCES "endpoint_resources" ("id") ON DELETE SET NULL);
CREATE UNIQUE INDEX "netlink_resources_resource_id_key" ON "netlink_resources" ("resource_id");
CREATE INDEX "netlinkresource_tenant_id" ON "netlink_resources" ("tenant_id");
CREATE TABLE "network_segments" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "resource_id" character varying NOT NULL, "name" character varying NULL, "vlan_id" integer NULL, "tenant_id" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "network_segment_site" bigint NOT NULL, PRIMARY KEY ("id"), CONSTRAINT "network_segments_site_resources_site" FOREIGN KEY ("network_segment_site") REFERENCES "site_resources" ("id") ON DELETE NO ACTION);
CREATE UNIQUE INDEX "network_segments_resource_id_key" ON "network_segments" ("resource_id");
CREATE TABLE "remote_access_configurations" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "resource_id" character varying NOT NULL, "expiration_timestamp" bigint NOT NULL, "local_port" bigint NULL, "user" character varying NULL, "current_state" character varying NULL, "desired_state" character varying NOT NULL, "configuration_status" character varying NULL, "configuration_status_indicator" character varying NULL, "configuration_status_timestamp" bigint NULL, "tenant_id" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "remote_access_configuration_instance" bigint NOT NULL, PRIMARY KEY ("id"), CONSTRAINT "remote_access_configurations_instance_resources_instance" FOREIGN KEY ("remote_access_configuration_instance") REFERENCES "instance_resources" ("id") ON DELETE NO ACTION);
CREATE UNIQUE INDEX "remote_access_configurations_resource_id_key" ON "remote_access_configurations" ("resource_id");
CREATE UNIQUE INDEX "remote_access_configurations_local_port_key" ON "remote_access_configurations" ("local_port");
CREATE INDEX "remoteaccessconfiguration_tenant_id" ON "remote_access_configurations" ("tenant_id");
CREATE TABLE "workload_resources" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "resource_id" character varying NOT NULL, "kind" character varying NOT NULL, "name" character varying NULL, "external_id" character varying NULL, "desired_state" character varying NOT NULL, "current_state" character varying NULL, "status" character varying NULL, "metadata" character varying NULL, "tenant_id" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, PRIMARY KEY ("id"));
CREATE UNIQUE INDEX "workload_resources_resource_id_key" ON "workload_resources" ("resource_id");
CREATE UNIQUE INDEX "workloadresource_external_id_tenant_id" ON "workload_resources" ("external_id", "tenant_id");
CREATE INDEX "workloadresource_tenant_id" ON "workload_resources" ("tenant_id");
CREATE TABLE "repeated_schedule_resources" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "resource_id" character varying NOT NULL, "schedule_status" character varying NULL, "name" character varying NULL, "duration_seconds" bigint NULL, "cron_minutes" character varying NOT NULL, "cron_hours" character varying NOT NULL, "cron_day_month" character varying NOT NULL, "cron_month" character varying NOT NULL, "cron_day_week" character varying NOT NULL, "tenant_id" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "repeated_schedule_resource_target_site" bigint NULL, "repeated_schedule_resource_target_host" bigint NULL, "repeated_schedule_resource_target_workload" bigint NULL, "repeated_schedule_resource_target_region" bigint NULL, PRIMARY KEY ("id"), CONSTRAINT "repeated_schedule_resources_site_resources_target_site" FOREIGN KEY ("repeated_schedule_resource_target_site") REFERENCES "site_resources" ("id") ON DELETE SET NULL, CONSTRAINT "repeated_schedule_resources_host_resources_target_host" FOREIGN KEY ("repeated_schedule_resource_target_host") REFERENCES "host_resources" ("id") ON DELETE SET NULL, CONSTRAINT "repeated_schedule_resources_workload_resources_target_workload" FOREIGN KEY ("repeated_schedule_resource_target_workload") REFERENCES "workload_resources" ("id") ON DELETE SET NULL, CONSTRAINT "repeated_schedule_resources_region_resources_target_region" FOREIGN KEY ("repeated_schedule_resource_target_region") REFERENCES "region_resources" ("id") ON DELETE SET NULL);
CREATE UNIQUE INDEX "repeated_schedule_resources_resource_id_key" ON "repeated_schedule_resources" ("resource_id");
CREATE INDEX "repeatedscheduleresource_tenant_id" ON "repeated_schedule_resources" ("tenant_id");
CREATE TABLE "single_schedule_resources" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "resource_id" character varying NOT NULL, "schedule_status" character varying NULL, "name" character varying NULL, "start_seconds" bigint NOT NULL, "end_seconds" bigint NULL, "tenant_id" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "single_schedule_resource_target_site" bigint NULL, "single_schedule_resource_target_host" bigint NULL, "single_schedule_resource_target_workload" bigint NULL, "single_schedule_resource_target_region" bigint NULL, PRIMARY KEY ("id"), CONSTRAINT "single_schedule_resources_site_resources_target_site" FOREIGN KEY ("single_schedule_resource_target_site") REFERENCES "site_resources" ("id") ON DELETE SET NULL, CONSTRAINT "single_schedule_resources_host_resources_target_host" FOREIGN KEY ("single_schedule_resource_target_host") REFERENCES "host_resources" ("id") ON DELETE SET NULL, CONSTRAINT "single_schedule_resources_workload_resources_target_workload" FOREIGN KEY ("single_schedule_resource_target_workload") REFERENCES "workload_resources" ("id") ON DELETE SET NULL, CONSTRAINT "single_schedule_resources_region_resources_target_region" FOREIGN KEY ("single_schedule_resource_target_region") REFERENCES "region_resources" ("id") ON DELETE SET NULL);
CREATE UNIQUE INDEX "single_schedule_resources_resource_id_key" ON "single_schedule_resources" ("resource_id");
CREATE INDEX "singlescheduleresource_tenant_id" ON "single_schedule_resources" ("tenant_id");
CREATE TABLE "telemetry_group_resources" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "resource_id" character varying NOT NULL, "name" character varying NOT NULL, "kind" character varying NOT NULL, "collector_kind" character varying NOT NULL, "groups" character varying NOT NULL, "tenant_id" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, PRIMARY KEY ("id"));
CREATE UNIQUE INDEX "telemetry_group_resources_resource_id_key" ON "telemetry_group_resources" ("resource_id");
CREATE INDEX "telemetrygroupresource_tenant_id" ON "telemetry_group_resources" ("tenant_id");
CREATE TABLE "telemetry_profiles" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "resource_id" character varying NOT NULL, "kind" character varying NOT NULL, "metrics_interval" bigint NULL, "log_level" character varying NULL, "tenant_id" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "telemetry_profile_region" bigint NULL, "telemetry_profile_site" bigint NULL, "telemetry_profile_instance" bigint NULL, "telemetry_profile_group" bigint NOT NULL, PRIMARY KEY ("id"), CONSTRAINT "telemetry_profiles_region_resources_region" FOREIGN KEY ("telemetry_profile_region") REFERENCES "region_resources" ("id") ON DELETE SET NULL, CONSTRAINT "telemetry_profiles_site_resources_site" FOREIGN KEY ("telemetry_profile_site") REFERENCES "site_resources" ("id") ON DELETE SET NULL, CONSTRAINT "telemetry_profiles_instance_resources_instance" FOREIGN KEY ("telemetry_profile_instance") REFERENCES "instance_resources" ("id") ON DELETE SET NULL, CONSTRAINT "telemetry_profiles_telemetry_group_resources_group" FOREIGN KEY ("telemetry_profile_group") REFERENCES "telemetry_group_resources" ("id") ON DELETE NO ACTION);
CREATE UNIQUE INDEX "telemetry_profiles_resource_id_key" ON "telemetry_profiles" ("resource_id");
CREATE INDEX "telemetryprofile_tenant_id" ON "telemetry_profiles" ("tenant_id");
CREATE TABLE "workload_members" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "resource_id" character varying NOT NULL, "kind" character varying NOT NULL, "tenant_id" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "workload_member_workload" bigint NOT NULL, "workload_member_instance" bigint NOT NULL, PRIMARY KEY ("id"), CONSTRAINT "workload_members_workload_resources_workload" FOREIGN KEY ("workload_member_workload") REFERENCES "workload_resources" ("id") ON DELETE NO ACTION, CONSTRAINT "workload_members_instance_resources_instance" FOREIGN KEY ("workload_member_instance") REFERENCES "instance_resources" ("id") ON DELETE NO ACTION);
CREATE UNIQUE INDEX "workload_members_resource_id_key" ON "workload_members" ("resource_id");
